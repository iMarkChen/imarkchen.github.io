import{_ as m,f as u,s as p,x,o as y,c as w,a as c,q as _,F as v,p as I,i as M}from"./index.cc01b20d.js";const E="/assets/testParticle.5d187168.png";const A=a=>(I("data-v-7806f674"),a=a(),M(),a),X=A(()=>c("canvas",{id:"canvas1",class:"canvas1"},null,-1)),Y=["src"],z={__name:"ImageParticle",setup(a){const t=u({canvas:null,ctx:null,effect:null});let n;p(()=>{t.canvas=document.getElementById("canvas1"),t.ctx=t.canvas.getContext("2d"),t.canvas.width=window.innerWidth-1,t.canvas.height=window.innerHeight-1,t.effect=new d(t.canvas.width,t.canvas.height),t.effect.init(t.ctx),o()}),x(()=>{window.cancelAnimationFrame(n)});class r{constructor(s,i,e,l,g){this.effect=s,this.x=this.effect.width,this.y=Math.random()*this.effect.width,this.originX=Math.floor(i),this.originY=Math.floor(e),this.imageX=l,this.imageY=g,this.size=this.effect.gap,this.vx=0,this.vy=0,this.ease=.3,this.friction=.97,this.dx=0,this.dy=0,this.distance=0,this.force=0,this.angle=0}draw(s){s.drawImage(this.effect.image,this.imageX,this.imageY,this.size,this.size,this.x,this.y,this.size,this.size)}update(){this.dx=this.effect.mouse.x-this.x,this.dy=this.effect.mouse.y-this.y,this.distance=Math.sqrt(this.dx*this.dx+this.dy*this.dy),this.force=-1e3/this.distance,this.distance<this.effect.mouse.radius&&(this.angle=Math.atan2(this.dy,this.dx),this.vx+=this.force*Math.cos(this.angle),this.vy+=this.force*Math.sin(this.angle)),this.x+=(this.vx*=this.friction)+(this.originX-this.x)*this.ease,this.y+=(this.vy*=this.friction)+(this.originY-this.y)*this.ease}shuffle(){this.x=Math.random()*this.effect.width,this.y=Math.random()*this.effect.height}}class d{constructor(s,i){this.width=s,this.height=i,this.particlesArray=[],this.image=document.getElementById("img1"),this.centerX=this.width*.5,this.centerY=this.height*.5,this.gap=15,this.mouse={x:void 0,y:void 0,radius:70},window.addEventListener("mousemove",e=>{this.mouse.x=e.x,this.mouse.y=e.y})}init(s){this.image.onload=()=>{this.x=this.centerX-this.image.width*.5,this.y=this.centerY-this.image.height*.5,s.drawImage(this.image,Math.floor(this.x),Math.floor(this.y));for(let i=0;i<this.image.height;i+=this.gap)for(let e=0;e<this.image.width;e+=this.gap)this.particlesArray.push(new r(this,e+400,i+60,e,i))}}draw(s){this.particlesArray.forEach(i=>i.draw(s))}update(){this.particlesArray.forEach(s=>s.update())}shuffle(){this.particlesArray.forEach(s=>s.shuffle())}}function o(){t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.effect.draw(t.ctx),t.effect.update(),n=requestAnimationFrame(o)}const f=()=>{var h;(h=t.effect)==null||h.shuffle()};return(h,s)=>(y(),w(v,null,[X,c("img",{id:"img1",class:"img1",src:_(E)},null,8,Y),c("div",{class:"controls"},[c("button",{id:"button1",class:"button1",onClick:f},"shuffle")])],64))}},P=m(z,[["__scopeId","data-v-7806f674"]]);export{P as default};
